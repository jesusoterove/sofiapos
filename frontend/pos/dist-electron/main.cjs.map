{
  "version": 3,
  "sources": ["../electron/main.ts"],
  "sourcesContent": ["/**\r\n * Electron main process.\r\n * Handles window creation and application lifecycle.\r\n * This file is compiled to CommonJS by esbuild.\r\n */\r\nimport { app, BrowserWindow, ipcMain, shell } from 'electron'\r\nimport * as path from 'path'\r\nimport { existsSync } from 'fs'\r\n\r\n// Keep a global reference of the window object\r\nlet mainWindow: BrowserWindow | null = null\r\n\r\n// For production builds, use app path\r\nconst isDev = process.env.NODE_ENV === 'development' || !app.isPackaged\r\n\r\nfunction createWindow() {\r\n  // Determine paths based on environment\r\n  // In CommonJS (compiled output), __dirname will be available\r\n  const appPath = app.getAppPath()\r\n  \r\n  let preloadPath: string\r\n  let indexPath: string\r\n  let iconPath: string\r\n  \r\n  if (isDev) {\r\n    // Development paths - use __dirname from compiled output (dist-electron directory)\r\n    preloadPath = path.join(__dirname, 'preload.cjs')\r\n    indexPath = 'http://localhost:5173'\r\n    // Icon path - try build directory, fallback to empty if not found\r\n    const iconPathDev = path.join(__dirname, '..', 'build', 'icon.png')\r\n    iconPath = existsSync(iconPathDev) ? iconPathDev : ''\r\n  } else {\r\n    // Production paths\r\n    preloadPath = path.join(appPath, 'dist-electron', 'preload.cjs')\r\n    indexPath = path.join(appPath, 'dist', 'index.html')\r\n    iconPath = path.join(appPath, 'build', 'icon.png')\r\n  }\r\n  \r\n  // Create the browser window\r\n  const windowOptions: Electron.BrowserWindowConstructorOptions = {\r\n    width: 1920,\r\n    height: 1080,\r\n    minWidth: 1024,\r\n    minHeight: 768,\r\n    webPreferences: {\r\n      preload: preloadPath,\r\n      nodeIntegration: false,\r\n      contextIsolation: true,\r\n      enableRemoteModule: false,\r\n    },\r\n    titleBarStyle: 'default',\r\n    autoHideMenuBar: !isDev, // Show menu bar in development\r\n    show: false, // Don't show until ready\r\n  }\r\n  \r\n  // Only set icon if it exists\r\n  if (iconPath && existsSync(iconPath)) {\r\n    windowOptions.icon = iconPath\r\n  }\r\n  \r\n  mainWindow = new BrowserWindow(windowOptions)\r\n\r\n  // Show window when ready\r\n  mainWindow.once('ready-to-show', () => {\r\n    mainWindow?.show()\r\n  })\r\n\r\n  // Load the app\r\n  if (isDev) {\r\n    // Development: load from Vite dev server\r\n    mainWindow.loadURL(indexPath)\r\n    // Open DevTools in development\r\n    mainWindow.webContents.openDevTools()\r\n  } else {\r\n    // Production: load from built files\r\n    mainWindow.loadFile(indexPath)\r\n  }\r\n\r\n  // Handle window closed\r\n  mainWindow.on('closed', () => {\r\n    mainWindow = null\r\n  })\r\n\r\n  // Handle external links\r\n  mainWindow.webContents.setWindowOpenHandler(({ url }) => {\r\n    // Open external links in default browser\r\n    shell.openExternal(url)\r\n    return { action: 'deny' }\r\n  })\r\n}\r\n\r\n// This method will be called when Electron has finished initialization\r\napp.whenReady().then(() => {\r\n  createWindow()\r\n\r\n  app.on('activate', () => {\r\n    // On macOS, re-create window when dock icon is clicked\r\n    if (BrowserWindow.getAllWindows().length === 0) {\r\n      createWindow()\r\n    }\r\n  })\r\n})\r\n\r\n// Quit when all windows are closed\r\napp.on('window-all-closed', () => {\r\n  // On macOS, keep app running even when all windows are closed\r\n  if (process.platform !== 'darwin') {\r\n    app.quit()\r\n  }\r\n})\r\n\r\n// IPC handlers for Electron-specific functionality\r\nipcMain.handle('get-app-version', () => {\r\n  return app.getVersion()\r\n})\r\n\r\nipcMain.handle('get-app-path', () => {\r\n  return app.getPath('userData')\r\n})\r\n\r\n// Handle app updates (if implementing auto-update)\r\nipcMain.handle('check-for-updates', async () => {\r\n  // Implement update checking logic here\r\n  return { available: false }\r\n})\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,sBAAmD;AACnD,WAAsB;AACtB,gBAA2B;AAG3B,IAAI,aAAmC;AAGvC,IAAM,QAAQ,QAAQ,IAAI,aAAa,iBAAiB,CAAC,oBAAI;AAE7D,SAAS,eAAe;AAGtB,QAAM,UAAU,oBAAI,WAAW;AAE/B,MAAI;AACJ,MAAI;AACJ,MAAI;AAEJ,MAAI,OAAO;AAET,kBAAmB,UAAK,WAAW,aAAa;AAChD,gBAAY;AAEZ,UAAM,cAAmB,UAAK,WAAW,MAAM,SAAS,UAAU;AAClE,mBAAW,sBAAW,WAAW,IAAI,cAAc;AAAA,EACrD,OAAO;AAEL,kBAAmB,UAAK,SAAS,iBAAiB,aAAa;AAC/D,gBAAiB,UAAK,SAAS,QAAQ,YAAY;AACnD,eAAgB,UAAK,SAAS,SAAS,UAAU;AAAA,EACnD;AAGA,QAAM,gBAA0D;AAAA,IAC9D,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,WAAW;AAAA,IACX,gBAAgB;AAAA,MACd,SAAS;AAAA,MACT,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,oBAAoB;AAAA,IACtB;AAAA,IACA,eAAe;AAAA,IACf,iBAAiB,CAAC;AAAA;AAAA,IAClB,MAAM;AAAA;AAAA,EACR;AAGA,MAAI,gBAAY,sBAAW,QAAQ,GAAG;AACpC,kBAAc,OAAO;AAAA,EACvB;AAEA,eAAa,IAAI,8BAAc,aAAa;AAG5C,aAAW,KAAK,iBAAiB,MAAM;AACrC,gBAAY,KAAK;AAAA,EACnB,CAAC;AAGD,MAAI,OAAO;AAET,eAAW,QAAQ,SAAS;AAE5B,eAAW,YAAY,aAAa;AAAA,EACtC,OAAO;AAEL,eAAW,SAAS,SAAS;AAAA,EAC/B;AAGA,aAAW,GAAG,UAAU,MAAM;AAC5B,iBAAa;AAAA,EACf,CAAC;AAGD,aAAW,YAAY,qBAAqB,CAAC,EAAE,IAAI,MAAM;AAEvD,0BAAM,aAAa,GAAG;AACtB,WAAO,EAAE,QAAQ,OAAO;AAAA,EAC1B,CAAC;AACH;AAGA,oBAAI,UAAU,EAAE,KAAK,MAAM;AACzB,eAAa;AAEb,sBAAI,GAAG,YAAY,MAAM;AAEvB,QAAI,8BAAc,cAAc,EAAE,WAAW,GAAG;AAC9C,mBAAa;AAAA,IACf;AAAA,EACF,CAAC;AACH,CAAC;AAGD,oBAAI,GAAG,qBAAqB,MAAM;AAEhC,MAAI,QAAQ,aAAa,UAAU;AACjC,wBAAI,KAAK;AAAA,EACX;AACF,CAAC;AAGD,wBAAQ,OAAO,mBAAmB,MAAM;AACtC,SAAO,oBAAI,WAAW;AACxB,CAAC;AAED,wBAAQ,OAAO,gBAAgB,MAAM;AACnC,SAAO,oBAAI,QAAQ,UAAU;AAC/B,CAAC;AAGD,wBAAQ,OAAO,qBAAqB,YAAY;AAE9C,SAAO,EAAE,WAAW,MAAM;AAC5B,CAAC;",
  "names": []
}
